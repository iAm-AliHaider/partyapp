@tailwind base;
@tailwind components;
@tailwind utilities;

@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Noto+Nastaliq+Urdu:wght@400;700&display=swap');

@layer base {
  :root {
    --color-accent: #DC2626;
    --color-gold: #D4A843;
    --safe-top: env(safe-area-inset-top, 0px);
    --safe-bottom: env(safe-area-inset-bottom, 0px);
  }

  html {
    -webkit-tap-highlight-color: transparent;
    -webkit-text-size-adjust: 100%;
    font-feature-settings: 'cv02', 'cv03', 'cv04', 'cv11';
  }

  html[dir="ltr"] { font-family: "Inter", system-ui, sans-serif; }
  html[dir="rtl"] { font-family: "Noto Nastaliq Urdu", "Inter", serif; line-height: 2; }
  html[dir="rtl"] .font-mono, html[dir="rtl"] input[type="tel"],
  html[dir="rtl"] input[type="number"], html[dir="rtl"] input[type="email"] {
    font-family: "Inter", monospace; direction: ltr; text-align: left;
  }

  body {
    @apply bg-surface-secondary text-label-primary antialiased;
    padding-top: env(safe-area-inset-top);
    padding-bottom: env(safe-area-inset-bottom);
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
  }

  * { -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }
}

@layer components {
  /* Safe areas */
  .safe-area-top { padding-top: env(safe-area-inset-top); }
  .safe-area-bottom { padding-bottom: env(safe-area-inset-bottom); }

  /* Page container */
  .page-container {
    @apply max-w-lg mx-auto px-5 pb-24 pt-2;
    padding-bottom: calc(5.5rem + env(safe-area-inset-bottom));
  }

  /* Cards — Apple style */
  .card {
    @apply bg-surface-primary rounded-apple-lg p-4 shadow-apple;
  }

  .card-grouped {
    @apply bg-surface-primary rounded-apple-lg overflow-hidden shadow-apple;
  }

  .card-grouped > .card-row {
    @apply px-4 py-3 flex items-center justify-between;
  }

  .card-grouped > .card-row + .card-row {
    @apply border-t border-separator;
  }

  /* Stat card */
  .stat-card {
    @apply card flex flex-col items-center justify-center text-center py-5;
  }

  /* Buttons */
  .btn-primary {
    @apply bg-accent text-white px-6 py-3.5 rounded-apple-lg font-semibold text-body
           active:opacity-70 transition-opacity duration-150 disabled:opacity-40;
  }

  .btn-secondary {
    @apply bg-surface-tertiary text-label-primary px-6 py-3.5 rounded-apple-lg font-semibold text-body
           active:opacity-70 transition-opacity duration-150;
  }

  .btn-ghost {
    @apply text-accent font-semibold text-body active:opacity-50 transition-opacity;
  }

  /* Input — iOS style */
  .input-field {
    @apply w-full px-4 py-3.5 rounded-apple-lg bg-surface-tertiary border-0
           focus:ring-2 focus:ring-accent/20 outline-none transition-all
           text-body text-label-primary placeholder:text-label-tertiary;
    min-height: 48px;
  }

  /* Section title */
  .section-title {
    @apply text-title-sm text-label-primary mb-4;
  }

  /* Pill / Tag */
  .pill {
    @apply px-3 py-1.5 rounded-full text-subhead font-medium transition-all;
  }

  .pill-active {
    @apply bg-accent text-white;
  }

  .pill-inactive {
    @apply bg-surface-tertiary text-label-secondary;
  }

  /* List row */
  .list-row {
    @apply flex items-center gap-3 px-4 py-3.5 bg-surface-primary;
  }

  .list-row + .list-row {
    @apply border-t border-separator;
  }

  /* Badge */
  .badge {
    @apply inline-flex items-center px-2 py-0.5 rounded-full text-caption font-medium;
  }

  .badge-green { @apply bg-emerald-50 text-emerald-700; }
  .badge-yellow { @apply bg-amber-50 text-amber-700; }
  .badge-red { @apply bg-red-50 text-red-700; }
  .badge-blue { @apply bg-blue-50 text-blue-700; }
  .badge-gray { @apply bg-gray-100 text-gray-600; }
}

/* iPhone notch header */
@supports (padding-top: env(safe-area-inset-top)) {
  .notch-header { padding-top: calc(1rem + env(safe-area-inset-top)); }
}

/* RTL */
[dir="rtl"] .card { text-align: right; }
[dir="rtl"] .font-mono { direction: ltr; unicode-bidi: embed; }

/* Backdrop blur for glass effects */
.glass {
  background: rgba(255, 255, 255, 0.72);
  backdrop-filter: saturate(180%) blur(20px);
  -webkit-backdrop-filter: saturate(180%) blur(20px);
}

/* Skeleton */
.skeleton { @apply bg-surface-tertiary rounded-apple animate-pulse; }

/* Smooth transitions */
.tap-scale { @apply active:scale-[0.97] transition-transform duration-100; }

/* Custom animations */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(8px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes slideUp {
  from { opacity: 0; transform: translateY(16px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes countUp {
  from { opacity: 0; transform: scale(0.8); }
  to { opacity: 1; transform: scale(1); }
}

.animate-fade-in { animation: fadeIn 0.3s ease-out; }
.animate-slide-up { animation: slideUp 0.4s ease-out; }
.animate-count-up { animation: countUp 0.5s ease-out; }
